<xml version="1.0" encoding="ISO-8859-1"?> 
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/peliculas">
		<xsl:text>{ "fecha": </xsl:text>
		<xsl:value-of select="/@fecha" />	
		<xsl:text>, "peliculas": [ </xsl:text>
			<xsl:for-each select="/pelicula">
				<xsl:text>{ "pelicula": {</xsl:text>
					<xsl:text> "titulo": </xsl:text>
					<xsl:call-template name="comillas">
						<xsl:with-param name="value" select="titulo" />
					</xsl:call-template>
					<xsl:text>, "descripcion": </xsl:text>
					<xsl:call-template name="comillas">
						<xsl:with-param name="value" select="descripcion" />
					</xsl:call-template>
					<xsl:text>, "lugar": {</xsl:text>
						<xsl:text> "nombre": </xsl:text>
						<xsl:call-template name="comillas">
							<xsl:with-param name="value" select="nombre" />
						</xsl:call-template>
						<xsl:text>, "direccion": </xsl:text>
						<xsl:call-template name="comillas">
							<xsl:with-param name="value" select="direccion" />
						</xsl:call-template>
						<xsl:text>, "sala": </xsl:text>
						<xsl:call-template name="comillas">
							<xsl:with-param name="value" select="sala" />
						</xsl:call-template>
					<xsl:text> }</xsl:text>
					<xsl:text>, "hora": </xsl:text>
					<xsl:call-template name="comillas">
						<xsl:with-param name="value" select="hora" />
					</xsl:call-template>
					<xsl:text>, "nacionalidad": [</xsl:text>
						<xsl:for-each select="/pais">
							<xsl:text>{ "pais": </xsl:text>
							<xsl:call-template name="comillas">
								<xsl:with-param name="value" select="pais" />
							</xsl:call-template>
							<xsl:text> }</xsl:text>
						</xsl:for-each>
					<xsl:text> ]</xsl:text>
				<xsl:text> }</xsl:text>
			</xsl:for-each>
		<xsl:text> }</xsl:text>
		<xsl:text> ] }</xsl:text>
	</xsl:template>

	<xsl:template name="comillas">
		<xsl:param name="value" />
		<xsl:text>"</xsl:text>
		<xsl:value-of select="value" />
		<xsl:text>"</xsl:text>
	</xsl:template>

</xsl:stylesheet>